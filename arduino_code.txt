#include <Servo.h>
 
// 腳位
int motor_pin[4] = {
  3, 5, 6, 9};
 
// 四個馬達
Servo motor[4];
 
// 檔位（15~180）
int throttle[4] = {
  15, 15 ,15 ,15};
 
// 迴圈用變數
int c;
 

//Change the motor value
int checkbyte = 0; //check on 255
int MID;	//馬達ID
int MSP;	//馬達SPEED

// 將訊號送到馬達
void sendSignalToMotor() {
  for(c=0; c<4; c++) {
    motor[c].write(throttle[c]);
  }
}
 
void setup() {
  Serial.begin(9600);
  for(c=0; c<4; c++){
    // 設定腳位
    motor[c].attach(motor_pin[c]);
  }
}
 
 
void loop() {
  incomingByte = Serial.read();
  if(incomingByte == 255){
	MID = Serial.read();
	MSP = Serial.read();
	if(MID == 1){  //To insure it is the right number
		throttle[0] = MSP;
	}
	else if(MID == 2){ 
		throttle[1] = MSP;
	}
	else if(MID == 3){ 
		throttle[2] = MSP;
	}
	else if(MID == 4){ 
		throttle[3] = MSP;
	}
	sendSignalToMotor();
	delay(10);
  }
	sendSignalToMotor();
	delay(10);
}